(this["webpackJsonptest-repetit"]=this["webpackJsonptest-repetit"]||[]).push([[0],{13:function(t,e,a){},15:function(t,e,a){"use strict";a.r(e);var n=a(1),c=a.n(n),r=a(6),s=a.n(r),i=(a(13),a(2));function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t}).apply(this,arguments)}function l(t,e){if(null==t)return{};var a,n,c=function(t,e){if(null==t)return{};var a,n,c={},r=Object.keys(t);for(n=0;n<r.length;n++)a=r[n],e.indexOf(a)>=0||(c[a]=t[a]);return c}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(n=0;n<r.length;n++)a=r[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(c[a]=t[a])}return c}var u=n.createElement("path",{d:"M6 7L0.803847 0.25L11.1962 0.250001L6 7Z",fill:"#009990"});function h(t,e){var a=t.title,c=t.titleId,r=l(t,["title","titleId"]);return n.createElement("svg",o({width:12,height:7,viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":c},r),a?n.createElement("title",{id:c},a):null,u)}var j=n.forwardRef(h),b=(a.p,a(0));var d=function(t){var e=t.title,a=t.optionsData,n=t.propertyName,c=t.disabled,r=t.onChange,s=t.name,i=t.required;return Object(b.jsxs)("div",{className:"select-container",children:[Object(b.jsxs)("select",{disabled:c,className:"select",id:"select",name:s,"aria-label":e,onChange:r,required:i,children:[Object(b.jsx)("option",{value:"",children:e}),a.map((function(t){return Object(b.jsx)("option",{value:t.id,children:t[n]},t.id)}))]}),Object(b.jsx)("div",{className:"select-icon",children:Object(b.jsx)(j,{})})]})};var f=function(t){var e=t.title,a=t.disabled;return Object(b.jsx)("button",{disabled:a,type:"submit",className:"submit-button",children:e})},O=a(7),m=a(8),p=new(function(){function t(e){Object(O.a)(this,t),this._url=e.baseUrl,this._headers=e.headers}return Object(m.a)(t,[{key:"_handleOriginalResponse",value:function(t){return t.ok?Promise.resolve(t.json()).then((function(e){return{data:e,status:t.status}})):Promise.reject(t.status)}},{key:"getInitialData",value:function(){return Promise.all([this.getSubjects(),this.getAreas()])}},{key:"getTeachersShortData",value:function(t){return fetch("".concat(this._url,"/teachers/short/?").concat(t),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"getTeacherIds",value:function(t){return fetch("".concat(this._url,"/search/teacherIds/?").concat(t),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"getAreas",value:function(){return fetch("".concat(this._url,"/areas"),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"getSubjects",value:function(){return fetch("".concat(this._url,"/subjects"),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"getDistricts",value:function(t){return fetch("".concat(this._url,"/districts/?areaId=").concat(t),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}}]),t}())({baseUrl:"https://api.repetit.ru/public",headers:{Accept:"application/json","Content-Type":"application/json"}}),g=a(3),v=a(4);var x=function(t){var e=t.onSubmit,a=t.subjects,c=t.areas,r=t.isLoadingData,s=Object(n.useState)([]),o=Object(i.a)(s,2),l=o[0],u=o[1],h=Object(n.useState)(!1),j=Object(i.a)(h,2),O=j[0],m=j[1],x=function(){var t=Object(n.useState)({}),e=Object(i.a)(t,2),a=e[0],c=e[1],r=Object(n.useState)({}),s=Object(i.a)(r,2),o=s[0],l=s[1],u=Object(n.useState)(!1),h=Object(i.a)(u,2),j=h[0],b=h[1],d=Object(n.useCallback)((function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];c(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),l(t),b(e)}),[c,l,b]);return{values:a,errors:o,isValid:j,handleChange:function(t){var e=t.target,n=e.name,r="checkbox"===e.type?e.checked:e.value;c(Object(v.a)(Object(v.a)({},a),{},Object(g.a)({},n,r))),l(Object(v.a)(Object(v.a)({},o),{},Object(g.a)({},n,e.validationMessage))),b(e.closest("form").checkValidity())},resetForm:d}}(),y=x.values,_=x.isValid,S=x.handleChange;return Object(n.useEffect)((function(){y.areaId&&(m(!0),p.getDistricts(y.areaId).then((function(t){200===t.status&&(u(t.data),m(!1))})).catch((function(t){console.log(t)})))}),[y.areaId]),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(t),e(y)},className:"form",children:[Object(b.jsxs)("div",{className:"form__container",children:[Object(b.jsx)(d,{title:r?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430":"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0440\u0435\u0434\u043c\u0435\u0442",optionsData:a,propertyName:"name",name:"subjectId",onChange:S,required:!0}),Object(b.jsx)(d,{title:r?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430":"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434",optionsData:c,propertyName:"cityName",name:"areaId",onChange:S,required:!0}),Object(b.jsx)(d,{title:O?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430":"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0440\u0430\u0439\u043e\u043d",optionsData:l,propertyName:"name",name:"districtId",onChange:S,required:!0})]}),Object(b.jsx)(f,{title:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440",disabled:!_||r||O})]})};var y=function(t){var e=t.text;return Object(b.jsx)("div",{className:"loading-text-container",children:Object(b.jsx)("p",{className:"loading-text",children:e})})},_=a.p+"static/media/not-allowed-image.9f9cc960.png";var S=function(t){var e,a=t.tutorData,n=function(t){return"".concat(t.firstName," ").concat(t.patrName)};return Object(b.jsxs)("article",{className:"article",children:[Object(b.jsx)("img",{className:"article__image",src:(e=a,e.hasPhoto?"http:".concat(e.photoPathLarge):_),alt:function(t){return"\u041d\u0430 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 ".concat(t.statusName," ").concat(n(t))}(a)}),Object(b.jsxs)("div",{className:"article__container",children:[Object(b.jsx)("h3",{className:"article__title",children:n(a)}),Object(b.jsx)("p",{className:"article__subtitle",children:function(t){return t.teachingSubjects.map((function(t,e,a){return a.length-1===e?"".concat(t.subject.name):"".concat(t.subject.name,"; ")}))}(a)}),Object(b.jsx)("p",{className:"article__text",children:function(t){return"\u043e\u0442 ".concat(Math.min.apply(null,t.teachingSubjects.map((function(t){return Number(t.price)}))).toString())}(a)})]})]})};var N=function(t){var e=t.title,a=t.onClick;return Object(b.jsx)("div",{className:"show-more-button-container",children:Object(b.jsx)("button",{className:"show-more-button",onClick:a,children:e})})};var k=function(t){var e=t.tutorsData,a=c.a.useState([]),r=Object(i.a)(a,2),s=r[0],o=r[1],l=c.a.useState(!1),u=Object(i.a)(l,2),h=u[0],j=u[1];return Object(n.useEffect)((function(){o(e.slice(0,10)),e.length<=10?j(!1):j(!0)}),[e,10]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("ul",{className:"list-tutors",children:s.map((function(t){return Object(b.jsx)("li",{className:"list-tutors__item",children:Object(b.jsx)(S,{tutorData:t})},t.id)}))}),h&&Object(b.jsx)(N,{title:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0451",onClick:function(){o(e.slice(0,s.length+10)),s.length>=e.length-10&&j(!1)}})]})};var w=function(){var t=Object(n.useState)([]),e=Object(i.a)(t,2),a=e[0],c=e[1],r=Object(n.useState)([]),s=Object(i.a)(r,2),o=s[0],l=s[1],u=Object(n.useState)(null),h=Object(i.a)(u,2),j=h[0],d=h[1],f=Object(n.useState)([]),O=Object(i.a)(f,2),m=O[0],g=O[1],v=Object(n.useState)(!1),_=Object(i.a)(v,2),S=_[0],N=_[1],w=Object(n.useState)(!1),D=Object(i.a)(w,2),I=D[0],E=D[1],C=Object(n.useState)(!1),P=Object(i.a)(C,2),T=P[0],R=P[1];return Object(n.useEffect)((function(){if(j){E(!0);var t=function(t){var e=new URLSearchParams;return t.forEach((function(t,a){e.set("Ids[".concat(a,"]"),t)})),e.toString()}(j);p.getTeachersShortData(t).then((function(t){g(t.data)})).catch((function(t){console.log(t)})).finally((function(){E(!1)}))}}),[j]),Object(n.useEffect)((function(){N(!0),p.getInitialData().then((function(t){var e=Object(i.a)(t,2),a=e[0],n=e[1];c(a.data),l(n.data)})).catch((function(t){console.log(t)})).finally((function(){N(!1)}))}),[]),Object(b.jsxs)("section",{children:[Object(b.jsx)(x,{onSubmit:function(t){R(!0);var e=function(t){var e=new URLSearchParams;return t.forEach((function(t){return e.set(t[0],t[1])})),e.toString()}(Object.keys(t).map((function(e){return[e,t[e]]})));p.getTeacherIds(e).then((function(t){d(t.data)})).catch((function(t){console.log(t)})).finally((function(){R(!1)}))},areas:o,subjects:a,isLoadingData:S||T||I}),I&&Object(b.jsx)(y,{text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}),Object(b.jsx)(k,{tutorsData:m})]})};s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(w,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.630c1f63.chunk.js.map
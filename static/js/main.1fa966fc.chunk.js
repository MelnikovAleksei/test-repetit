(this["webpackJsonptest-repetit"]=this["webpackJsonptest-repetit"]||[]).push([[0],{16:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),r=n(9),s=n.n(r),i=(n(16),n(2));function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}function l(t,e){if(null==t)return{};var n,a,c=function(t,e){if(null==t)return{};var n,a,c={},r=Object.keys(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||(c[n]=t[n]);return c}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(c[n]=t[n])}return c}var u=a.createElement("path",{d:"M6 7L0.803847 0.25L11.1962 0.250001L6 7Z",fill:"#009990"});function h(t,e){var n=t.title,c=t.titleId,r=l(t,["title","titleId"]);return a.createElement("svg",o({width:12,height:7,viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":c},r),n?a.createElement("title",{id:c},n):null,u)}var j=a.forwardRef(h),b=(n.p,n(0));var d=function(t){var e=t.title,n=t.optionsData,a=t.propertyName,c=t.disabled,r=t.onChange,s=t.name,i=t.required;return Object(b.jsxs)("div",{className:"select-container",children:[Object(b.jsxs)("select",{disabled:c,className:"select",id:"select",name:s,"aria-label":e,onChange:r,required:i,children:[Object(b.jsx)("option",{value:"",children:e}),n.map((function(t){return Object(b.jsx)("option",{value:t.id,children:t[a]},t.id)}))]}),Object(b.jsx)("div",{className:"select-icon",children:Object(b.jsx)(j,{})})]})};var f=function(t){var e=t.title,n=t.disabled;return Object(b.jsx)("button",{disabled:n,type:"submit",className:"submit-button",children:e})},O=n(10),m=n(11),p=new(function(){function t(e){Object(O.a)(this,t),this._url=e.baseUrl,this._headers=e.headers}return Object(m.a)(t,[{key:"_handleOriginalResponse",value:function(t){return t.ok?Promise.resolve(t.json()).then((function(e){return{data:e,status:t.status}})):Promise.reject(t.status)}},{key:"getInitialData",value:function(){return Promise.all([this.getSubjects(),this.getAreas()])}},{key:"getTeachersShortData",value:function(t){return fetch("".concat(this._url,"/teachers/short/?").concat(t),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"getTeacherIds",value:function(t){return fetch("".concat(this._url,"/search/teacherIds/?").concat(t),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"getAreas",value:function(){return fetch("".concat(this._url,"/areas"),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"getSubjects",value:function(){return fetch("".concat(this._url,"/subjects"),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"getDistricts",value:function(t){return fetch("".concat(this._url,"/districts/?areaId=").concat(t),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}}]),t}())({baseUrl:"https://api.repetit.ru/public",headers:{Accept:"application/json","Content-Type":"application/json"}}),g=n(4),v=n(5);var x=function(t){var e=t.onSubmit,n=Object(a.useState)([]),c=Object(i.a)(n,2),r=c[0],s=c[1],o=Object(a.useState)([]),l=Object(i.a)(o,2),u=l[0],h=l[1],j=Object(a.useState)([]),O=Object(i.a)(j,2),m=O[0],x=O[1],y=Object(a.useState)(!1),S=Object(i.a)(y,2),_=S[0],N=S[1],k=Object(a.useState)(!1),I=Object(i.a)(k,2),w=I[0],E=I[1],D=function(){var t=Object(a.useState)({}),e=Object(i.a)(t,2),n=e[0],c=e[1],r=Object(a.useState)({}),s=Object(i.a)(r,2),o=s[0],l=s[1],u=Object(a.useState)(!1),h=Object(i.a)(u,2),j=h[0],b=h[1],d=Object(a.useCallback)((function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];c(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),l(t),b(e)}),[c,l,b]);return{values:n,errors:o,isValid:j,handleChange:function(t){var e=t.target,a=e.name,r="checkbox"===e.type?e.checked:e.value;c(Object(v.a)(Object(v.a)({},n),{},Object(g.a)({},a,r))),l(Object(v.a)(Object(v.a)({},o),{},Object(g.a)({},a,e.validationMessage))),b(e.closest("form").checkValidity())},resetForm:d}}(),C=D.values,T=D.isValid,P=D.handleChange;return Object(a.useEffect)((function(){C.areaId&&(x([]),E(!0),p.getDistricts(C.areaId).then((function(t){x(t.data)})).catch((function(t){console.log(t)})).finally((function(){E(!1)})))}),[C.areaId]),Object(a.useEffect)((function(){N(!0),p.getInitialData().then((function(t){var e=Object(i.a)(t,2),n=e[0],a=e[1];s(n.data),h(a.data)})).catch((function(t){console.log(t)})).finally((function(){N(!1)}))}),[]),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(t),e(C)},className:"form",children:[Object(b.jsxs)("div",{className:"form__container",children:[Object(b.jsx)(d,{title:_?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430":"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0440\u0435\u0434\u043c\u0435\u0442",optionsData:r,propertyName:"name",name:"subjectId",onChange:P,required:!0}),Object(b.jsx)(d,{title:_?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430":"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434",optionsData:u,propertyName:"cityName",name:"areaId",onChange:P,required:!0}),Object(b.jsx)(d,{title:w?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430":"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0440\u0430\u0439\u043e\u043d",optionsData:m,propertyName:"name",name:"districtId",onChange:P,required:!0})]}),Object(b.jsx)(f,{title:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440",disabled:!T||_||w})]})},y=n(8),S=n.p+"static/media/not-allowed-image.9f9cc960.png";var _=function(t){var e,n=t.tutorData,a=function(t){return"".concat(t.firstName," ").concat(t.patrName)};return Object(b.jsxs)("article",{className:"article",children:[Object(b.jsx)("img",{className:"article__image",src:(e=n,e.hasPhoto?"http:".concat(e.photoPathLarge):S),alt:function(t){return"\u041d\u0430 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 ".concat(t.statusName," ").concat(a(t))}(n)}),Object(b.jsxs)("div",{className:"article__container",children:[Object(b.jsx)("h3",{className:"article__title",children:a(n)}),Object(b.jsx)("p",{className:"article__subtitle",children:function(t){return t.teachingSubjects.map((function(t,e,n){return n.length-1===e?"".concat(t.subject.name):"".concat(t.subject.name,"; ")}))}(n)}),Object(b.jsx)("p",{className:"article__text",children:function(t){return"\u043e\u0442 ".concat(Math.min.apply(null,t.teachingSubjects.map((function(t){return Number(t.price)}))).toString()," \u0440")}(n)})]})]})};var N=function(t){var e=t.text;return Object(b.jsx)("div",{className:"feedback-text-container",children:Object(b.jsx)("p",{className:"feedback-text",children:e})})};var k=function(t){var e=t.title,n=t.onClick,a=t.disabled;return Object(b.jsx)("div",{className:"show-more-button-container",children:Object(b.jsx)("button",{className:"show-more-button",onClick:n,disabled:a,children:e})})};var I=function(t){var e=t.tutorsIds,n=Object(a.useState)(null),c=Object(i.a)(n,2),r=c[0],s=c[1],o=Object(a.useState)([]),l=Object(i.a)(o,2),u=l[0],h=l[1],j=Object(a.useState)(0),d=Object(i.a)(j,2),f=d[0],O=d[1],m=Object(a.useState)(!1),g=Object(i.a)(m,2),v=g[0],x=g[1],S=Object(a.useState)(!1),I=Object(i.a)(S,2),w=I[0],E=I[1],D=function(t){var e=new URLSearchParams;return t.forEach((function(t,n){e.set("Ids[".concat(n,"]"),t)})),e.toString()};return Object(a.useEffect)((function(){r&&(x(r.length>1),O(0),E(!0),p.getTeachersShortData(D(r[0])).then((function(t){h(t.data),O((function(t){return t+1}))})).catch((function(t){console.log(t)})).finally((function(){E(!1)})))}),[r]),Object(a.useEffect)((function(){e.length>=1?s(function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=[],a=0;a<Math.ceil(t.length/e);a++)n[a]=t.slice(a*e,a*e+e);return n}(e)):(h([]),x(!1))}),[e]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("ul",{className:"list-tutors",children:u.map((function(t){return Object(b.jsx)("li",{className:"list-tutors__item",children:Object(b.jsx)(_,{tutorData:t})},t.id)}))}),w&&Object(b.jsx)(N,{text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445..."}),v&&!w&&Object(b.jsx)(k,{title:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0451",onClick:function(){E(!0),p.getTeachersShortData(D(r[f])).then((function(t){h((function(e){return[].concat(Object(y.a)(e),Object(y.a)(t.data))})),O((function(t){return t+1})),void 0===r[f+1]?x(!1):x(!0)})).catch((function(t){console.log(t)})).finally((function(){E(!1)}))},disabled:w})]})};var w=function(){var t=Object(a.useState)([]),e=Object(i.a)(t,2),n=e[0],c=e[1],r=Object(a.useState)(!0),s=Object(i.a)(r,2),o=s[0],l=s[1],u=Object(a.useState)(!1),h=Object(i.a)(u,2),j=h[0],d=h[1];return Object(b.jsxs)("section",{children:[Object(b.jsx)(x,{onSubmit:function(t){d(!0),l(!0),c([]);var e=function(t){var e=new URLSearchParams;return t.forEach((function(t){return e.set(t[0],t[1])})),e.toString()}(Object.keys(t).map((function(e){return[e,t[e]]})));p.getTeacherIds(e).then((function(t){t.data.length>=1?(l(!0),c(t.data)):(l(!1),c(t.data))})).catch((function(t){console.log(t)})).finally((function(){d(!1)}))},isLoadingTeachersIds:j}),j&&Object(b.jsx)(N,{text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430 \u0440\u0435\u043f\u0435\u0442\u0438\u0442\u043e\u0440\u043e\u0432..."}),o?Object(b.jsx)(I,{tutorsIds:n}):Object(b.jsx)(N,{text:"\u041f\u043e \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u043c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]})};s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(w,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.1fa966fc.chunk.js.map
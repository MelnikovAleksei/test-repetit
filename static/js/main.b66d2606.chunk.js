(this["webpackJsonptest-repetit"]=this["webpackJsonptest-repetit"]||[]).push([[0],{16:function(t,e,a){},18:function(t,e,a){"use strict";a.r(e);var n=a(2),r=a.n(n),c=a(9),s=a.n(c),i=(a(16),a(3)),o=a(1);function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t}).apply(this,arguments)}function l(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},c=Object.keys(t);for(n=0;n<c.length;n++)a=c[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(n=0;n<c.length;n++)a=c[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var d=n.createElement("path",{d:"M6 7L0.803847 0.25L11.1962 0.250001L6 7Z",fill:"#009990"});function h(t,e){var a=t.title,r=t.titleId,c=l(t,["title","titleId"]);return n.createElement("svg",u({width:12,height:7,viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":r},c),a?n.createElement("title",{id:r},a):null,d)}var j=n.forwardRef(h),b=(a.p,a(0));var T=function(t){var e=t.title,a=t.optionsData,n=t.propertyName,r=t.disabled,c=t.onChange,s=t.name,i=t.required;return Object(b.jsxs)("div",{className:"select-container",children:[Object(b.jsxs)("select",{disabled:r,className:"select",id:"select",name:s,"aria-label":e,onChange:c,required:i,children:[Object(b.jsx)("option",{value:"",children:e}),a.map((function(t){return Object(b.jsx)("option",{value:t.id,children:t[n]},t.id)}))]}),Object(b.jsx)("div",{className:"select-icon",children:Object(b.jsx)(j,{})})]})};var O=function(t){var e=t.title,a=t.disabled;return Object(b.jsx)("button",{disabled:a,type:"submit",className:"submit-button",children:e})};var p=function(t){var e=t.text;return Object(b.jsx)("div",{className:"feedback-text-container",children:Object(b.jsx)("p",{className:"feedback-text",children:e})})},g=a(10),_=a(11),f=new(function(){function t(e){Object(g.a)(this,t),this._url=e.baseUrl,this._headers=e.headers}return Object(_.a)(t,[{key:"_handleOriginalResponse",value:function(t){return t.ok?Promise.resolve(t.json()).then((function(e){return{data:e,status:t.status}})):Promise.reject(t.status)}},{key:"getInitialData",value:function(){return Promise.all([this.getSubjects(),this.getAreas()])}},{key:"getTeachersShortData",value:function(t){return fetch("".concat(this._url,"/teachers/short/?").concat(t),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"getInitialTeachersIds",value:function(){return fetch("".concat(this._url,"/search/teacherIds/?subjectId=1&areaId=1&districtId=1"),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"getTeacherIds",value:function(t){return fetch("".concat(this._url,"/search/teacherIds/?").concat(t),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"getAreas",value:function(){return fetch("".concat(this._url,"/areas"),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"getSubjects",value:function(){return fetch("".concat(this._url,"/subjects"),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"getDistricts",value:function(t){return fetch("".concat(this._url,"/districts/?areaId=").concat(t),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}}]),t}())({baseUrl:"https://api.repetit.ru/public",headers:{Accept:"application/json","Content-Type":"application/json"}}),m=a(5);var D={isLoadingInitData:!1,isLoadingDistrictsData:!1,subjects:[],areas:[],districts:[],initDataFetchError:null,districtsDataFetchError:null},E=function(t,e){switch(e.type){case"FETCH_INIT_DATA_START":return Object(o.a)(Object(o.a)({},t),{},{isLoadingInitData:!0});case"FETCH_INIT_DATA_SUCCES":var a=e.payload,n=a.subjects,r=a.areas;return Object(o.a)(Object(o.a)({},t),{},{subjects:n.data,areas:r.data,initDataFetchError:null,isLoadingInitData:!1});case"FETCH_INIT_DATA_ERROR":return Object(o.a)(Object(o.a)({},t),{},{initDataFetchError:e.payload,isLoadingInitData:!1});case"FETCH_DISTRICTS_DATA_START":return Object(o.a)(Object(o.a)({},t),{},{isLoadingDistrictsData:!0});case"FETCH_DISTRICTS_DATA_SUCCES":return Object(o.a)(Object(o.a)({},t),{},{isLoadingDistrictsData:!1,districts:e.payload,districtsDataFetchError:null});case"FETCH_DISTRICTS_DATA_ERROR":return Object(o.a)(Object(o.a)({},t),{},{districtsDataFetchError:e.payload,isLoadingDistrictsData:!1});default:return{state:t}}};var y=function(t){var e=t.onSubmit,a=Object(n.useReducer)(E,D),r=Object(i.a)(a,2),c=r[0],s=r[1],u=function(){var t=Object(n.useState)({}),e=Object(i.a)(t,2),a=e[0],r=e[1],c=Object(n.useState)({}),s=Object(i.a)(c,2),u=s[0],l=s[1],d=Object(n.useState)(!1),h=Object(i.a)(d,2),j=h[0],b=h[1],T=Object(n.useCallback)((function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),l(t),b(e)}),[r,l,b]);return{values:a,errors:u,isValid:j,handleChange:function(t){var e=t.target,n=e.name,c="checkbox"===e.type?e.checked:e.value;r(Object(o.a)(Object(o.a)({},a),{},Object(m.a)({},n,c))),l(Object(o.a)(Object(o.a)({},u),{},Object(m.a)({},n,e.validationMessage))),b(e.closest("form").checkValidity())},resetForm:T}}(),l=u.values,d=u.isValid,h=u.handleChange;return Object(n.useEffect)((function(){l.areaId&&(s({type:"FETCH_DISTRICTS_DATA_START"}),f.getDistricts(l.areaId).then((function(t){s({type:"FETCH_DISTRICTS_DATA_SUCCES",payload:t.data})})).catch((function(t){s({type:"FETCH_DISTRICTS_DATA_ERROR",payload:"".concat("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u0440\u0430\u0439\u043e\u043d\u043e\u0432:"," ").concat(t.message)})})))}),[l.areaId]),Object(n.useEffect)((function(){s({type:"FETCH_INIT_DATA_START"}),f.getInitialData().then((function(t){var e=Object(i.a)(t,2),a=e[0],n=e[1];s({type:"FETCH_INIT_DATA_SUCCES",payload:{subjects:a,areas:n}})})).catch((function(t){s({type:"FETCH_INIT_DATA_ERROR",payload:"".concat("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432 \u0438 \u0433\u043e\u0440\u043e\u0434\u043e\u0432:"," ").concat(t.message)})}))}),[]),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(t),e(l)},className:"form",children:[Object(b.jsxs)("div",{className:"form__container",children:[Object(b.jsx)(T,{title:c.isLoadingInitData?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430":"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0440\u0435\u0434\u043c\u0435\u0442",optionsData:c.subjects,propertyName:"name",name:"subjectId",onChange:h,required:!0}),Object(b.jsx)(T,{title:c.isLoadingInitData?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430":"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434",optionsData:c.areas,propertyName:"cityName",name:"areaId",onChange:h,required:!0}),Object(b.jsx)(T,{title:c.isLoadingDistrictsData?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430":"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0440\u0430\u0439\u043e\u043d",optionsData:c.districts,propertyName:"name",name:"districtId",onChange:h,required:!0})]}),Object(b.jsx)(O,{title:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440",disabled:!d||c.isLoadingInitData||c.isLoadingDistrictsData}),c.initDataFetchError&&Object(b.jsx)(p,{text:c.initDataFetchError}),c.districtsDataFetchError&&Object(b.jsx)(p,{text:c.districtsDataFetchError})]})},A=a(6),x=a.p+"static/media/not-allowed-image.9f9cc960.png";var S=function(t){var e,a=t.tutorData,n=function(t){return"".concat(t.firstName," ").concat(t.patrName)};return Object(b.jsxs)("article",{className:"article",children:[Object(b.jsx)("img",{className:"article__image",src:(e=a,e.hasPhoto?"http:".concat(e.photoPathLarge):x),alt:function(t){return"\u041d\u0430 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 ".concat(t.statusName," ").concat(n(t))}(a)}),Object(b.jsxs)("div",{className:"article__container",children:[Object(b.jsx)("h3",{className:"article__title",children:n(a)}),Object(b.jsx)("p",{className:"article__subtitle",children:function(t){return t.teachingSubjects.map((function(t,e,a){return a.length-1===e?"".concat(t.subject.name):"".concat(t.subject.name,"; ")}))}(a)}),Object(b.jsx)("p",{className:"article__text",children:function(t){return"\u043e\u0442 ".concat(Math.min.apply(null,t.teachingSubjects.map((function(t){return Number(t.price)}))).toString()," \u0440")}(a)})]})]})};var C=function(t){var e=t.title,a=t.onClick,n=t.disabled;return Object(b.jsx)("div",{className:"show-more-button-container",children:Object(b.jsx)("button",{className:"show-more-button",onClick:a,disabled:n,children:e})})},v={tutorsData:[],tutorsPages:[],initialPage:0,nextPage:0,hasMorePages:!1,isLoading:!1,errorText:null},R=function(t,e){switch(e.type){case"RESET_LIST":return Object(o.a)(Object(o.a)({},t),{},{initialPage:0,nextPage:0,hasMorePages:!1,tutorsPages:[],tutorsData:[],errorText:null});case"SET_TUTORS_PAGES":return Object(o.a)(Object(o.a)({},t),{},{tutorsPages:e.payload});case"FETCH_DATA_SUCCES":return t.tutorsPages[t.nextPage+1]?Object(o.a)(Object(o.a)({},t),{},{hasMorePages:!0,nextPage:t.nextPage+1,tutorsData:[].concat(Object(A.a)(t.tutorsData),Object(A.a)(e.payload)),errorText:null,isLoading:!1}):Object(o.a)(Object(o.a)({},t),{},{hasMorePages:!1,tutorsData:[].concat(Object(A.a)(t.tutorsData),Object(A.a)(e.payload)),errorText:null,isLoading:!1});case"FETCH_DATA_START":return Object(o.a)(Object(o.a)({},t),{},{isLoading:!0});case"FETCH_DATA_ERROR":return Object(o.a)(Object(o.a)({},t),{},{errorText:e.payload,isLoading:!1});default:return{state:t}}};var I=function(t){var e=t.tutorsPages,a=Object(n.useReducer)(R,v),r=Object(i.a)(a,2),c=r[0],s=r[1],o="\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u0440\u0435\u043f\u0435\u0442\u0438\u0442\u043e\u0440\u043e\u0432:",u=function(t){var e=new URLSearchParams;return t.forEach((function(t,a){e.set("Ids[".concat(a,"]"),t)})),e.toString()};return Object(n.useEffect)((function(){s({type:"RESET_LIST"}),s({type:"SET_TUTORS_PAGES",payload:e}),s({type:"FETCH_DATA_START"}),f.getTeachersShortData(u(e[0])).then((function(t){s({type:"FETCH_DATA_SUCCES",payload:t.data})})).catch((function(t){s({type:"FETCH_DATA_ERROR",payload:"".concat(o," ").concat(t.message)})}))}),[e]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("ul",{className:"list-tutors",children:c.tutorsData.map((function(t){return Object(b.jsx)("li",{className:"list-tutors__item",children:Object(b.jsx)(S,{tutorData:t})},t.id)}))}),c.isLoading&&Object(b.jsx)(p,{text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445..."}),c.errorText&&Object(b.jsx)(p,{text:c.errorText}),c.hasMorePages&&!c.isLoading&&Object(b.jsx)(C,{title:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0451",onClick:function(){s({type:"FETCH_DATA_START"}),f.getTeachersShortData(u(c.tutorsPages[c.nextPage])).then((function(t){s({type:"FETCH_DATA_SUCCES",payload:t.data})})).catch((function(t){s({type:"FETCH_DATA_ERROR",payload:"".concat(o," ").concat(t.message)})}))},disabled:c.isLoadingData})]})},F=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=[],n=0;n<Math.ceil(t.length/e);n++)a[n]=t.slice(n*e,n*e+e);return a},L={data:[],isLoading:!1,errorText:null},N=function(t,e){switch(e.type){case"FETCH_DATA_SUCCES":return Object(o.a)(Object(o.a)({},t),{},{data:F(e.payload,10),errorText:null,isLoading:!1});case"FETCH_DATA_START":return Object(o.a)(Object(o.a)({},t),{},{isLoading:!0});case"FETCH_DATA_ERROR":return Object(o.a)(Object(o.a)({},t),{},{errorText:e.payload,isLoading:!1});default:return{state:t}}};var P=function(){var t="\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u0440\u0435\u043f\u0435\u0442\u0438\u0442\u043e\u0440\u043e\u0432:",e=Object(n.useReducer)(N,L),a=Object(i.a)(e,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){c({type:"FETCH_DATA_START"}),f.getInitialTeachersIds().then((function(t){c({type:"FETCH_DATA_SUCCES",payload:t.data})})).catch((function(e){c({type:"FETCH_DATA_ERROR",payload:"".concat(t," ").concat(e.message)})}))}),[]),Object(b.jsxs)("section",{children:[Object(b.jsx)(y,{onSubmit:function(e){c({type:"FETCH_DATA_START"});var a=function(t){var e=new URLSearchParams;return t.forEach((function(t){return e.set(t[0],t[1])})),e.toString()}(Object.keys(e).map((function(t){return[t,e[t]]})));f.getTeacherIds(a).then((function(t){c({type:"FETCH_DATA_SUCCES",payload:t.data})})).catch((function(e){c({type:"FETCH_DATA_ERROR",payload:"".concat(t," ").concat(e.message)})}))}}),r.isLoading&&Object(b.jsx)(p,{text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430 \u0440\u0435\u043f\u0435\u0442\u0438\u0442\u043e\u0440\u043e\u0432..."}),r.errorText&&Object(b.jsx)(p,{text:r.errorText}),r.data.length?Object(b.jsx)(I,{tutorsPages:r.data}):!r.isLoading&&Object(b.jsx)(p,{text:"\u041f\u043e \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u043c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]})};s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(P,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.b66d2606.chunk.js.map
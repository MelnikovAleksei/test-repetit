(this["webpackJsonptest-repetit"]=this["webpackJsonptest-repetit"]||[]).push([[0],{16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(9),s=a.n(r),i=(a(16),a(8)),o=a(2);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var a,n,c=function(e,t){if(null==e)return{};var a,n,c={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var h=n.createElement("path",{d:"M6 7L0.803847 0.25L11.1962 0.250001L6 7Z",fill:"#009990"});function j(e,t){var a=e.title,c=e.titleId,r=u(e,["title","titleId"]);return n.createElement("svg",l({width:12,height:7,viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},r),a?n.createElement("title",{id:c},a):null,h)}var d=n.forwardRef(j),b=(a.p,a(0));var f=function(e){var t=e.title,a=e.optionsData,n=e.propertyName,c=e.disabled,r=e.onChange,s=e.name,i=e.required;return Object(b.jsxs)("div",{className:"select-container",children:[Object(b.jsxs)("select",{disabled:c,className:"select",id:"select",name:s,"aria-label":t,onChange:r,required:i,children:[Object(b.jsx)("option",{value:"",children:t}),a.map((function(e){return Object(b.jsx)("option",{value:e.id,children:e[n]},e.id)}))]}),Object(b.jsx)("div",{className:"select-icon",children:Object(b.jsx)(d,{})})]})};var O=function(e){var t=e.title,a=e.disabled;return Object(b.jsx)("button",{disabled:a,type:"submit",className:"submit-button",children:t})},m=a(10),g=a(11),p=new(function(){function e(t){Object(m.a)(this,e),this._url=t.baseUrl,this._headers=t.headers}return Object(g.a)(e,[{key:"_handleOriginalResponse",value:function(e){return e.ok?Promise.resolve(e.json()).then((function(t){return{data:t,status:e.status}})):Promise.reject(e.status)}},{key:"getInitialData",value:function(){return Promise.all([this.getSubjects(),this.getAreas()])}},{key:"getTeachersShortData",value:function(e){return fetch("".concat(this._url,"/teachers/short/?").concat(e),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"getTeacherIds",value:function(e){return fetch("".concat(this._url,"/search/teacherIds/?").concat(e),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"getAreas",value:function(){return fetch("".concat(this._url,"/areas"),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"getSubjects",value:function(){return fetch("".concat(this._url,"/subjects"),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"getDistricts",value:function(e){return fetch("".concat(this._url,"/districts/?areaId=").concat(e),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}}]),e}())({baseUrl:"https://api.repetit.ru/public",headers:{Accept:"application/json","Content-Type":"application/json"}}),v=a(4),x=a(5);var S=function(e){var t=e.onSubmit,a=e.subjects,c=e.areas,r=e.isLoadingData,s=Object(n.useState)([]),i=Object(o.a)(s,2),l=i[0],u=i[1],h=Object(n.useState)(!1),j=Object(o.a)(h,2),d=j[0],m=j[1],g=function(){var e=Object(n.useState)({}),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)({}),s=Object(o.a)(r,2),i=s[0],l=s[1],u=Object(n.useState)(!1),h=Object(o.a)(u,2),j=h[0],d=h[1],b=Object(n.useCallback)((function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];c(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),l(e),d(t)}),[c,l,d]);return{values:a,errors:i,isValid:j,handleChange:function(e){var t=e.target,n=t.name,r="checkbox"===t.type?t.checked:t.value;c(Object(x.a)(Object(x.a)({},a),{},Object(v.a)({},n,r))),l(Object(x.a)(Object(x.a)({},i),{},Object(v.a)({},n,t.validationMessage))),d(t.closest("form").checkValidity())},resetForm:b}}(),S=g.values,y=g.isValid,_=g.handleChange;return Object(n.useEffect)((function(){S.areaId&&(u([]),m(!0),p.getDistricts(S.areaId).then((function(e){200===e.status&&(u(e.data),m(!1))})).catch((function(e){console.log(e)})))}),[S.areaId]),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(e),t(S)},className:"form",children:[Object(b.jsxs)("div",{className:"form__container",children:[Object(b.jsx)(f,{title:r?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430":"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0440\u0435\u0434\u043c\u0435\u0442",optionsData:a,propertyName:"name",name:"subjectId",onChange:_,required:!0}),Object(b.jsx)(f,{title:r?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430":"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434",optionsData:c,propertyName:"cityName",name:"areaId",onChange:_,required:!0}),Object(b.jsx)(f,{title:d?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430":"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0440\u0430\u0439\u043e\u043d",optionsData:l,propertyName:"name",name:"districtId",onChange:_,required:!0})]}),Object(b.jsx)(O,{title:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440",disabled:!y||r||d})]})};var y=function(e){var t=e.text;return Object(b.jsx)("div",{className:"loading-text-container",children:Object(b.jsx)("p",{className:"loading-text",children:t})})},_=a.p+"static/media/not-allowed-image.9f9cc960.png";var N=function(e){var t,a=e.tutorData,n=function(e){return"".concat(e.firstName," ").concat(e.patrName)};return Object(b.jsxs)("article",{className:"article",children:[Object(b.jsx)("img",{className:"article__image",src:(t=a,t.hasPhoto?"http:".concat(t.photoPathLarge):_),alt:function(e){return"\u041d\u0430 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 ".concat(e.statusName," ").concat(n(e))}(a)}),Object(b.jsxs)("div",{className:"article__container",children:[Object(b.jsx)("h3",{className:"article__title",children:n(a)}),Object(b.jsx)("p",{className:"article__subtitle",children:function(e){return e.teachingSubjects.map((function(e,t,a){return a.length-1===t?"".concat(e.subject.name):"".concat(e.subject.name,"; ")}))}(a)}),Object(b.jsx)("p",{className:"article__text",children:function(e){return"\u043e\u0442 ".concat(Math.min.apply(null,e.teachingSubjects.map((function(e){return Number(e.price)}))).toString()," \u0440")}(a)})]})]})};var k=function(e){var t=e.title,a=e.onClick,n=e.disabled;return Object(b.jsx)("div",{className:"show-more-button-container",children:Object(b.jsx)("button",{className:"show-more-button",onClick:a,disabled:n,children:t})})};var w=function(e){var t=e.tutorsData,a=e.handleShowMoreClick,n=e.hasMorePages,c=e.isLoadingTeachersData,r=e.isLoadingInitTeachersPage;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("ul",{className:"list-tutors",children:t.map((function(e){return Object(b.jsx)("li",{className:"list-tutors__item",children:Object(b.jsx)(N,{tutorData:e})},e.id)}))}),c&&Object(b.jsx)(y,{text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}),n&&Object(b.jsx)(k,{title:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0451",onClick:a,disabled:r||c})]})};var D=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),s=Object(o.a)(r,2),l=s[0],u=s[1],h=Object(n.useState)(null),j=Object(o.a)(h,2),d=j[0],f=j[1],O=Object(n.useState)([]),m=Object(o.a)(O,2),g=m[0],v=m[1],x=Object(n.useState)(0),_=Object(o.a)(x,2),N=_[0],k=_[1],D=Object(n.useState)(!1),I=Object(o.a)(D,2),E=I[0],T=I[1],C=Object(n.useState)(!1),P=Object(o.a)(C,2),L=P[0],M=P[1],R=Object(n.useState)(!1),q=Object(o.a)(R,2),G=q[0],U=q[1],A=Object(n.useState)(!1),V=Object(o.a)(A,2),B=V[0],F=V[1],J=Object(n.useState)(!1),Z=Object(o.a)(J,2),z=Z[0],H=Z[1],K=function(e){var t=new URLSearchParams;return e.forEach((function(e,a){t.set("Ids[".concat(a,"]"),e)})),t.toString()};return Object(n.useEffect)((function(){d&&(T(d.length>1),k(0),U(!0),p.getTeachersShortData(K(d[0])).then((function(e){v(e.data),k((function(e){return e+1}))})).catch((function(e){console.log(e)})).finally((function(){U(!1)})))}),[d]),Object(n.useEffect)((function(){M(!0),p.getInitialData().then((function(e){var t=Object(o.a)(e,2),a=t[0],n=t[1];c(a.data),u(n.data)})).catch((function(e){console.log(e)})).finally((function(){M(!1)}))}),[]),Object(b.jsxs)("section",{children:[Object(b.jsx)(S,{onSubmit:function(e){F(!0);var t=function(e){var t=new URLSearchParams;return e.forEach((function(e){return t.set(e[0],e[1])})),t.toString()}(Object.keys(e).map((function(t){return[t,e[t]]})));p.getTeacherIds(t).then((function(e){f(function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=[],n=0;n<Math.ceil(e.length/t);n++)a[n]=e.slice(n*t,n*t+t);return a}(e.data))})).catch((function(e){console.log(e)})).finally((function(){F(!1)}))},areas:l,subjects:a,isLoadingData:L||B||z}),G&&Object(b.jsx)(y,{text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}),Object(b.jsx)(w,{tutorsData:g,handleShowMoreClick:function(){H(!0),p.getTeachersShortData(K(d[N])).then((function(e){v((function(t){return[].concat(Object(i.a)(t),Object(i.a)(e.data))})),k((function(e){return e+1})),void 0===d[N+1]?T(!1):T(!0)})).catch((function(e){console.log(e)})).finally((function(){H(!1)}))},hasMorePages:E,isLoadingInitTeachersPage:G,isLoadingTeachersData:z})]})};s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(D,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.e06c074e.chunk.js.map